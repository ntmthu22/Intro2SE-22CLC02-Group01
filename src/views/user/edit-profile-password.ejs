<%- include('../includes/general/head.ejs') %>
</head>
  <body>
    <%- include('../includes/general/navbar.ejs') %>
    
    <section class="container py-5 d-flex align-items-center justify-content-center">
      <div class="card position-relative" style="width: 24rem;">

        <a href="/user/edit-profile" class="position-absolute" style="top:5px;left:5px;background:none;border:none">
          <%- include('../icons/arrow_left.svg') %>
        </a>
        
        <form id="passwordForm" class="pt-5 p-3" action="/user/edit-profile/password" method="POST">
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" class="form-control
            <%= validationErrors.find(e => e.path === 'password') ? 'is-invalid' : '' %>" name="password" id="password" placeholder="Enter current password" required value="<%= oldInput.password %>">
          </div>
          <div class="form-group">
            <label for="newPassword">New password</label>
            <input type="password" class="form-control
            <%= validationErrors.find(e => e.path === 'newPassword') ? 'is-invalid' : '' %>" name="newPassword" id="newPassword" placeholder="Enter new password" required value="<%= oldInput.newPassword %>">
          </div>
          <div class="form-group">
            <label for="confirmNewPassword">Confirm new password</label>
            <input type="password" class="form-control
            <%= validationErrors.find(e => e.path === 'confirmNewPassword') ? 'is-invalid' : '' %>" name="confirmNewPassword" id="confirmNewPassword" placeholder="Confirm new password" required value="<%= oldInput.confirmNewPassword%>">
          </div>
          <small id="passwordHelp" class="form-text text-muted mb-3"><%= errorMessage ? errorMessage : '' %></small>
          <button type="submit" class="btn btn-primary btn-lg btn-block">Submit</button>
        </form>
      </div>
    </section>
    
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('passwordForm');

        form.addEventListener('input', (e) => {
          if (e.target.tagName === 'INPUT') {
            e.target.classList.remove('is-invalid');
          }
        });
        /*nameInput.addEventListener('input', () => {
          nameInput.classList.remove('is-invalid');
          if (nameInput.value.trim() !== initialValue.trim()) {
            submitButton.disabled = false;
          } else {
            submitButton.disabled = true;
          }
        });*/

        /* submitButton.addEventListener('click', (e) => {
          if (nameInput.value.trim() === '') {
            document.getElementById('passwordHelp').innerText = "Your name shouldn't be blank.";
            e.preventDefault();
            nameInput.classList.add('is-invalid');
          }
        }) */
      });
    </script>
  </body>
</html>
